(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{fnke:function(c,o,e){"use strict";e.r(o),e.d(o,"AllowLocationPageModule",function(){return f});var l=e("ofXK"),d=e("3Pt+"),n=e("TEn/"),i=e("tyNb"),a=e("fXoL"),g=e("WOgW"),t=e("92l+"),s=e("Bfh1"),r=e("Sy1n"),h=e("h+qT");function p(c,o){1&c&&a.Kb(0,"ion-spinner")}function u(c,o){1&c&&(a.Ob(0,"span",9),a.rc(1," Turn On Location "),a.Kb(2,"ion-ripple-effect"),a.Nb())}const m=function(c){return{ios_header_css_:c}},b=[{path:"",component:(()=>{class c{constructor(c,o,e,l,d,n,i){this.router=c,this.androidPermissions=o,this.locationAccuracy=e,this.geolocation=l,this.platform=d,this.appcomponent=n,this.nativeGeocoder=i,this.countries=[{code:"AF",callingcode:"93"},{code:"AL",callingcode:"355"},{code:"DZ",callingcode:"213"},{code:"AS",callingcode:"1684"},{code:"AD",callingcode:"376"},{code:"AO",callingcode:"244"},{code:"AI",callingcode:"1264"},{code:"AQ",callingcode:"672"},{code:"AG",callingcode:"1268"},{code:"AR",callingcode:"54"},{code:"AM",callingcode:"374"},{code:"AW",callingcode:"297"},{code:"AU",callingcode:"61"},{code:"AT",callingcode:"43"},{code:"AZ",callingcode:"994"},{code:"BS",callingcode:"1242"},{code:"BH",callingcode:"973"},{code:"BD",callingcode:"880"},{code:"BB",callingcode:"1246"},{code:"BY",callingcode:"375"},{code:"BE",callingcode:"32"},{code:"BZ",callingcode:"501"},{code:"BJ",callingcode:"229"},{code:"BM",callingcode:"1441"},{code:"BT",callingcode:"975"},{code:"BO",callingcode:"591"},{code:"BQ",callingcode:"5997"},{code:"BA",callingcode:"387"},{code:"BW",callingcode:"267"},{code:"BR",callingcode:"55"},{code:"IO",callingcode:"246"},{code:"VG",callingcode:"1284"},{code:"VI",callingcode:"1 340"},{code:"BN",callingcode:"673"},{code:"BG",callingcode:"359"},{code:"BF",callingcode:"226"},{code:"BI",callingcode:"257"},{code:"KH",callingcode:"855"},{code:"CM",callingcode:"237"},{code:"CA",callingcode:"1"},{code:"CV",callingcode:"238"},{code:"KY",callingcode:"1345"},{code:"CF",callingcode:"236"},{code:"TD",callingcode:"235"},{code:"CL",callingcode:"56"},{code:"CN",callingcode:"86"},{code:"CX",callingcode:"61"},{code:"CC",callingcode:"61"},{code:"CO",callingcode:"57"},{code:"KM",callingcode:"269"},{code:"CG",callingcode:"242"},{code:"CD",callingcode:"243"},{code:"CK",callingcode:"682"},{code:"CR",callingcode:"506"},{code:"HR",callingcode:"385"},{code:"CU",callingcode:"53"},{code:"CW",callingcode:"599"},{code:"CY",callingcode:"357"},{code:"CZ",callingcode:"420"},{code:"DK",callingcode:"45"},{code:"DJ",callingcode:"253"},{code:"DM",callingcode:"1767"},{code:"DO",callingcode:"1809"},{code:"EC",callingcode:"593"},{code:"EG",callingcode:"20"},{code:"SV",callingcode:"503"},{code:"GQ",callingcode:"240"},{code:"ER",callingcode:"291"},{code:"EE",callingcode:"372"},{code:"ET",callingcode:"251"},{code:"FK",callingcode:"500"},{code:"FO",callingcode:"298"},{code:"FJ",callingcode:"679"},{code:"FI",callingcode:"358"},{code:"FR",callingcode:"33"},{code:"GF",callingcode:"594"},{code:"PF",callingcode:"689"},{code:"GA",callingcode:"241"},{code:"GM",callingcode:"220"},{code:"GE",callingcode:"995"},{code:"DE",callingcode:"49"},{code:"GH",callingcode:"233"},{code:"GI",callingcode:"350"},{code:"GR",callingcode:"30"},{code:"GL",callingcode:"299"},{code:"GD",callingcode:"1473"},{code:"GP",callingcode:"590"},{code:"GU",callingcode:"1671"},{code:"GT",callingcode:"502"},{code:"GG",callingcode:"44"},{code:"GN",callingcode:"224"},{code:"GW",callingcode:"245"},{code:"GY",callingcode:"592"},{code:"HT",callingcode:"509"},{code:"VA",callingcode:"379"},{code:"HN",callingcode:"504"},{code:"HK",callingcode:"852"},{code:"HU",callingcode:"36"},{code:"IS",callingcode:"354"},{code:"IN",callingcode:"91"},{code:"ID",callingcode:"62"},{code:"IR",callingcode:"98"},{code:"IQ",callingcode:"964"},{code:"IE",callingcode:"353"},{code:"IM",callingcode:"44"},{code:"IL",callingcode:"972"},{code:"IT",callingcode:"39"},{code:"JM",callingcode:"1876"},{code:"JP",callingcode:"81"},{code:"JE",callingcode:"44"},{code:"JO",callingcode:"962"},{code:"KZ",callingcode:"76"},{code:"KE",callingcode:"254"},{code:"KI",callingcode:"686"},{code:"KW",callingcode:"965"},{code:"KG",callingcode:"996"},{code:"LV",callingcode:"371"},{code:"LB",callingcode:"961"},{code:"LS",callingcode:"266"},{code:"LR",callingcode:"231"},{code:"LY",callingcode:"218"},{code:"LI",callingcode:"423"},{code:"LT",callingcode:"370"},{code:"LU",callingcode:"352"},{code:"MO",callingcode:"853"},{code:"MK",callingcode:"389"},{code:"MG",callingcode:"261"},{code:"MW",callingcode:"265"},{code:"MY",callingcode:"60"},{code:"MV",callingcode:"960"},{code:"ML",callingcode:"223"},{code:"MT",callingcode:"356"},{code:"MH",callingcode:"692"},{code:"MQ",callingcode:"596"},{code:"MR",callingcode:"222"},{code:"MU",callingcode:"230"},{code:"YT",callingcode:"262"},{code:"MX",callingcode:"52"},{code:"FM",callingcode:"691"},{code:"MD",callingcode:"373"},{code:"MC",callingcode:"377"},{code:"MN",callingcode:"976"},{code:"ME",callingcode:"382"},{code:"MS",callingcode:"1664"},{code:"MA",callingcode:"212"},{code:"MZ",callingcode:"258"},{code:"MM",callingcode:"95"},{code:"NA",callingcode:"264"},{code:"NR",callingcode:"674"},{code:"NP",callingcode:"977"},{code:"NL",callingcode:"31"},{code:"NC",callingcode:"687"},{code:"NZ",callingcode:"64"},{code:"NI",callingcode:"505"},{code:"NE",callingcode:"227"},{code:"NG",callingcode:"234"},{code:"NU",callingcode:"683"},{code:"NF",callingcode:"672"},{code:"MP",callingcode:"1670"},{code:"NO",callingcode:"47"},{code:"OM",callingcode:"968"},{code:"PK",callingcode:"92"},{code:"PW",callingcode:"680"},{code:"PS",callingcode:"970"},{code:"PA",callingcode:"507"},{code:"PG",callingcode:"675"},{code:"PY",callingcode:"595"},{code:"PE",callingcode:"51"},{code:"PH",callingcode:"63"},{code:"PN",callingcode:"64"},{code:"PL",callingcode:"48"},{code:"PT",callingcode:"351"},{code:"PR",callingcode:"1787"},{code:"QA",callingcode:"974"},{code:"XK",callingcode:"383"},{code:"RE",callingcode:"262"},{code:"RO",callingcode:"40"},{code:"RU",callingcode:"7"},{code:"RW",callingcode:"250"},{code:"BL",callingcode:"590"},{code:"SH",callingcode:"290"},{code:"KN",callingcode:"1869"},{code:"LC",callingcode:"1758"},{code:"MF",callingcode:"590"},{code:"PM",callingcode:"508"},{code:"VC",callingcode:"1784"},{code:"WS",callingcode:"685"},{code:"SM",callingcode:"378"},{code:"ST",callingcode:"239"},{code:"SA",callingcode:"966"},{code:"SN",callingcode:"221"},{code:"RS",callingcode:"381"},{code:"SC",callingcode:"248"},{code:"SL",callingcode:"232"},{code:"SG",callingcode:"65"},{code:"SX",callingcode:"1721"},{code:"SK",callingcode:"421"},{code:"SI",callingcode:"386"},{code:"SB",callingcode:"677"},{code:"SO",callingcode:"252"},{code:"ZA",callingcode:"27"},{code:"GS",callingcode:"500"},{code:"KR",callingcode:"82"},{code:"SS",callingcode:"211"},{code:"ES",callingcode:"34"},{code:"LK",callingcode:"94"},{code:"SD",callingcode:"249"},{code:"SR",callingcode:"597"},{code:"SJ",callingcode:"4779"},{code:"SZ",callingcode:"268"},{code:"SE",callingcode:"46"},{code:"CH",callingcode:"41"},{code:"SY",callingcode:"963"},{code:"TW",callingcode:"886"},{code:"TJ",callingcode:"992"},{code:"TZ",callingcode:"255"},{code:"TH",callingcode:"66"},{code:"TL",callingcode:"670"},{code:"TG",callingcode:"228"},{code:"TK",callingcode:"690"},{code:"TO",callingcode:"676"},{code:"TT",callingcode:"1868"},{code:"TN",callingcode:"216"},{code:"TR",callingcode:"90"},{code:"TM",callingcode:"993"},{code:"TC",callingcode:"1649"},{code:"TV",callingcode:"688"},{code:"UG",callingcode:"256"},{code:"UA",callingcode:"380"},{code:"AE",callingcode:"971"},{code:"GB",callingcode:"44"},{code:"US",callingcode:"1"},{code:"UY",callingcode:"598"},{code:"UZ",callingcode:"998"},{code:"VU",callingcode:"678"},{code:"VE",callingcode:"58"},{code:"VN",callingcode:"84"},{code:"WF",callingcode:"681"},{code:"EH",callingcode:"212"},{code:"YE",callingcode:"967"},{code:"ZM",callingcode:"260"},{code:"ZW",callingcode:"263"}];let a=window.localStorage.getItem("phone-model");this.ios_header="10"==a}ngOnInit(){}next(){this.loading=!0,this.enable_location()}enable_location(){this.platform.is("ios")?this.loadMap():this.checkGPSPermission()}checkGPSPermission(){this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(c=>{c.hasPermission?this.askToTurnOnGPS():this.requestGPSPermission()},c=>{console.log(c)})}requestGPSPermission(){this.locationAccuracy.canRequest().then(c=>{c?console.log("4"):this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(()=>{this.askToTurnOnGPS()},c=>{})})}askToTurnOnGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{this.loadMap()})}loadMap(){return new Promise((c,o)=>{this.geolocation.getCurrentPosition({timeout:1e4,enableHighAccuracy:!0,maximumAge:3600}).then(o=>{c(!0),this.getAddressFromCoords(o.coords.latitude,o.coords.longitude),this.loading=!1,this.router.navigate(["allow-notification"])}).catch(c=>{console.log(c)})})}getAddressFromCoords(c,o){this.nativeGeocoder.reverseGeocode(c,o,{useLocale:!0,maxResults:5}).then(c=>{console.log(c[0]);let o=this.countries.filter(o=>o.code===c[0].countryCode);o.length>0&&(this.phone_code="+"+o[0].callingcode,window.localStorage.setItem("code",o[0].code),window.localStorage.setItem("calling_code",this.phone_code),this.country_name=c[0].countryName,window.localStorage.setItem("state",c[0].administrativeArea),window.localStorage.setItem("city",c[0].subAdministrativeArea),window.localStorage.setItem("postal_code",c[0].postalCode),window.localStorage.setItem("country_ name",this.country_name)),this.address="";let e=[];for(let[l,d]of Object.entries(c[0]))d.length>0&&e.push(d);e.reverse();for(let l of e)this.address+=l+", ";this.address=this.address.slice(0,-2),window.localStorage.setItem("address",this.address)}).catch(c=>{this.address="Address Not Available!"})}move(){this.appcomponent.leftSlide("allow-notification")}}return c.\u0275fac=function(o){return new(o||c)(a.Jb(i.g),a.Jb(g.a),a.Jb(t.a),a.Jb(s.a),a.Jb(n.bb),a.Jb(r.a),a.Jb(h.a))},c.\u0275cmp=a.Db({type:c,selectors:[["app-allow-location"]],decls:13,vars:5,consts:[[1,"ion-padding"],[1,"skip_btn",3,"ngClass","click"],[1,"row_center"],["autoplay","","loop","","src","assets/location.json",2,"width","300px","height","300px"],[1,"Location"],[1,"sub_heading"],[1,"form_btn","ion-activatable","ripple-parent",3,"click"],[4,"ngIf"],["class","submit-txt",4,"ngIf"],[1,"submit-txt"]],template:function(c,o){1&c&&(a.Ob(0,"ion-content",0),a.Ob(1,"ion-buttons",1),a.Wb("click",function(){return o.move()}),a.Ob(2,"p"),a.rc(3,"Skip"),a.Nb(),a.Nb(),a.Ob(4,"div",2),a.Kb(5,"lottie-player",3),a.Ob(6,"h4",4),a.rc(7,"Allow Location"),a.Nb(),a.Ob(8,"p",5),a.rc(9,"Vairt uses your device\u2019s location services. For best experience, Please turn them on"),a.Nb(),a.Nb(),a.Ob(10,"button",6),a.Wb("click",function(){return o.next()}),a.qc(11,p,1,0,"ion-spinner",7),a.qc(12,u,3,0,"span",8),a.Nb(),a.Nb()),2&c&&(a.zb(1),a.fc("ngClass",a.ic(3,m,1==o.ios_header)),a.zb(10),a.fc("ngIf",o.loading),a.zb(1),a.fc("ngIf",!o.loading))},directives:[n.o,n.i,l.i,l.k,n.M,n.C],styles:["ion-content[_ngcontent-%COMP%]{--background:#f7f7f7}.row_center[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center}.Location[_ngcontent-%COMP%]{font-family:poppins semibold;color:#333;font-size:22px}.sub_heading[_ngcontent-%COMP%]{font-family:poppins regular;color:#333;font-size:13px;text-align:center;margin-top:0;width:90%}.form_btn[_ngcontent-%COMP%]{position:fixed;bottom:0;margin-bottom:35px;height:45px;width:80%;left:50%;transform:translateX(-50%)}.skip_btn[_ngcontent-%COMP%]{font-family:poppins semibold;float:right;color:var(--ion-color-primary);width:50px;height:50px;margin-top:0}.ios_header_css_[_ngcontent-%COMP%]{margin-top:15px}"]}),c})()}];let S=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=a.Hb({type:c}),c.\u0275inj=a.Gb({imports:[[i.i.forChild(b)],i.i]}),c})(),f=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=a.Hb({type:c}),c.\u0275inj=a.Gb({imports:[[l.b,d.g,n.U,S]]}),c})()}}]);